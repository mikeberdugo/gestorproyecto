{% extends 'plantilla.html' %}
{% load static %}
{% block id_project %}proyecto.id{% endblock %}

{% block title %} gestion de proyecto  - {{proyecto.name}} {% endblock %}
{% block name %}
    {{proyecto.name}}
{% endblock %}

{% block css %}
    <link rel="stylesheet" href="{% static './css/stilos_kanban.css' %}">
{% endblock %}

{% block conten %}
<tg-legacy ng-version="10.0.14"></tg-legacy>
<div tg-navigation-bar="" ng-if="!errorHandling.showingError">

</div>
<div ng-if="!errorHandling.showingError">
    <div ng-view="" class="master">
        <tg-create-project-form type="kanban">
            <div class="create-project">
                <div class="tarjeta">
                    <div class="titulo">
                        <h1 class="create-project-title">Lecciones</h1>
                    </div>
    <form method="post" name="projectForm"  novalidate="novalidate" class="ng-pristine ng-invalid ng-invalid-required" onsubmit="return validarFormulario()" >
        {% csrf_token %}
        <div >
            <fieldset>
                <label for="identificando_problema">Identificación del problema</label>
                <input id="identificando_problema" name="identificando_problema" type="text" ng-model="vm.projectForm.identificando_problema" placeholder="Identificación (Requerido)" data-required="true" required="required" class="ng-pristine ng-untouched ng-empty ng-invalid ng-invalid-required" aria-invalid="true">
            </fieldset>
        </div>
        <div >
            <fieldset>
                <label for="causa">Causa</label>
                <textarea id="causa" name="causa"  placeholder="Causa del problema (Requerido)" data-required="true" required="required" class="ng-pristine ng-untouched ng-empty ng-invalid ng-invalid-required" aria-invalid="true"></textarea>
            </fieldset>
        </div>
        <!-- <div >
                <fieldset>
                    <label for="solucion">Solución</label>
                    <textarea id="solucion" name="solucion"  placeholder="Solución del problema (Requerido)" data-required="true" required="required" class="ng-pristine ng-untouched ng-empty ng-invalid ng-invalid-required" aria-invalid="true"></textarea>
                </fieldset>
            </div>
            <div >
                <fieldset>
                    <label for="planes_mejora_aplicados">Planes de mejora aplicados</label>
                    <textarea id="planes_mejora_aplicados" name="planes_mejora_aplicados"   placeholder="Plan de mejora (Requerido)" data-required="true" required="required" class="ng-pristine ng-untouched ng-empty ng-invalid ng-invalid-required" aria-invalid="true"></textarea>
                </fieldset>
            </div>
            <div >
                <fieldset>
                    <label for="resultados_planes_mejora">Resultados de los planes de mejora</label>
                    <textarea id="resultados_planes_mejora" name="resultados_planes_mejora"   placeholder="Resultado del plan (Requerido)" data-required="true" required="required" class="ng-pristine ng-untouched ng-empty ng-invalid ng-invalid-required" aria-invalid="true"></textarea>
                </fieldset>
            </div> -->
        <br>
        <div >
            <div class="create-project-action">
                <a href="{% url 'main:leccionesprojec' codigo=proyecto.codigo %}" variant="secondary" type="button" title="Volver" class="btn-small create-project-action-cancel" >Volver</a>
                <button type="submit" class="btn-small create-project-action-submit" title="Asignar Proyecto">Guardar</button>
            </div>
        </div>
        <br>
   </form>


</div>
</div>





</div>
</tg-create-project-form>
</div>
</div>

{% endblock %}


{% block scripts %}

<script>
    function validarFormulario() {
            // Obtener referencias a los campos del formulario
            var nombreProyecto = document.getElementById('project-name').value;
            var descripcionProyecto = document.getElementById('project-description').value;
            var fechaInicio = document.getElementById('project-start-date-planned').value;
            var fechaFin = document.getElementById('project-end-date-planned').value;
            var alcance = document.getElementById('project-scope').value;
            var estado = document.getElementById('project-status').value;
            var lider = document.getElementById('project-leader').value;
            var grupo = document.getElementById('project-group').value;
            var fase = document.getElementById('project-phase').value;
            var comentarios = document.getElementById('project-comments').value;

            // Validar que ninguno de los campos esté vacío
            if (nombreProyecto === "" || descripcionProyecto === "" || fechaInicio === "" || fechaFin === "" || alcance === "" || estado === "" || lider === "" || grupo === "" || fase === "" || comentarios === "") {
                // Mostrar un mensaje de error si algún campo está vacío
                alert("Por favor, complete todos los campos del formulario.");
                // Evitar que se realice la publicación del formulario
                return false;
            }

            if (new Date(fechaFin) < new Date(fechaInicio)) {
                alert("La fecha de fin no puede ser anterior a la fecha de inicio.");
                return false;
            }

            return true;
        }

</script>


{% endblock %}


